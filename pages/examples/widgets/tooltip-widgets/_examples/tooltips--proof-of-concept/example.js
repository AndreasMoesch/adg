;(function () {
  var AdgTooltip

  AdgTooltip = class AdgTooltip {
    constructor (el) {
      this.$el = $(el)
      this.value = this.$el.attr('data-adg-tooltip')
      this.initIcon()
      this.initBalloon()
      this.initDescription()
      this.initElEvents()
      this.initIconEvents()
    }

    initIcon () {
      this.$icon = $("<span aria-hidden='true'>?</span>")
      return this.$el.after(this.$icon)
    }

    initBalloon () {
      this.$balloon = $(`<span>${this.value}</span>`)
      this.$icon.append(this.$balloon)
      return this.$balloon.click(() => {
        return this.hide()
      })
    }

    initDescription () {
      var valueElement
      valueElement = `<span data-adg-sr-only> (${this.value})</span>`
      if (this.$el.is('input, textarea, select')) {
        return $(`label[for='${this.$el.attr('id')}']`).append(valueElement)
      } else {
        return this.$el.append(valueElement)
      }
    }

    initElEvents () {
      this.$el.focusin(() => {
        return this.show()
      })
      this.$el.focusout(() => {
        return this.hide()
      })
      this.$el.mouseenter(() => {
        return this.show()
      })
      this.$el.mouseleave(() => {
        if (!this.$el.is(':focus')) {
          return this.hide()
        }
      })
      return this.$el.keyup(e => {
        if (e.keyCode === 27) {
          // Esc
          if (this.$balloon.is(':visible')) {
            return this.hide()
          } else {
            return this.show()
          }
        }
      })
    }

    initIconEvents () {
      this.$icon.mouseenter(() => {
        return this.show()
      })
      return this.$icon.mouseleave(() => {
        if (!this.$el.is(':focus')) {
          return this.hide()
        }
      })
    }

    show () {
      return this.$balloon.show()
    }

    hide () {
      return this.$balloon.hide()
    }
  }

  $(document).ready(function () {
    return $('[data-adg-tooltip]').each(function () {
      return new AdgTooltip(this)
    })
  })
}.call(this))

// # sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiPGFub255bW91cz4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBOztFQUFNLGFBQU4sTUFBQSxXQUFBO0lBQ0UsV0FBYSxDQUFDLEVBQUQsQ0FBQTtNQUNYLElBQUMsQ0FBQSxHQUFELEdBQU8sQ0FBQSxDQUFFLEVBQUY7TUFDUCxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUMsQ0FBQSxHQUFHLENBQUMsSUFBTCxDQUFVLGtCQUFWO01BRVQsSUFBQyxDQUFBLFFBQUQsQ0FBQTtNQUNBLElBQUMsQ0FBQSxXQUFELENBQUE7TUFDQSxJQUFDLENBQUEsZUFBRCxDQUFBO01BRUEsSUFBQyxDQUFBLFlBQUQsQ0FBQTtNQUNBLElBQUMsQ0FBQSxjQUFELENBQUE7SUFUVzs7SUFXYixRQUFVLENBQUEsQ0FBQTtNQUNSLElBQUMsQ0FBQSxLQUFELEdBQVMsQ0FBQSxDQUFFLG1DQUFGO2FBQ1QsSUFBQyxDQUFBLEdBQUcsQ0FBQyxLQUFMLENBQVcsSUFBQyxDQUFBLEtBQVo7SUFGUTs7SUFJVixXQUFhLENBQUEsQ0FBQTtNQUNYLElBQUMsQ0FBQSxRQUFELEdBQVksQ0FBQSxDQUFFLENBQUEsTUFBQSxDQUFBLENBQVMsSUFBQyxDQUFBLEtBQVYsQ0FBZ0IsT0FBaEIsQ0FBRjtNQUNaLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxDQUFjLElBQUMsQ0FBQSxRQUFmO2FBRUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxLQUFWLENBQWdCLENBQUEsQ0FBQSxHQUFBO2VBQ2QsSUFBQyxDQUFBLElBQUQsQ0FBQTtNQURjLENBQWhCO0lBSlc7O0lBT2IsZUFBaUIsQ0FBQSxDQUFBO0FBQ2YsVUFBQTtNQUFBLFlBQUEsR0FBZSxDQUFBLHlCQUFBLENBQUEsQ0FBNEIsSUFBQyxDQUFBLEtBQTdCLENBQW1DLFFBQW5DO01BRWYsSUFBRyxJQUFDLENBQUEsR0FBRyxDQUFDLEVBQUwsQ0FBUSx5QkFBUixDQUFIO2VBQ0UsQ0FBQSxDQUFFLENBQUEsV0FBQSxDQUFBLENBQWMsSUFBQyxDQUFBLEdBQUcsQ0FBQyxJQUFMLENBQVUsSUFBVixDQUFkLENBQThCLEVBQTlCLENBQUYsQ0FBb0MsQ0FBQyxNQUFyQyxDQUE0QyxZQUE1QyxFQURGO09BQUEsTUFBQTtlQUdFLElBQUMsQ0FBQSxHQUFHLENBQUMsTUFBTCxDQUFZLFlBQVosRUFIRjs7SUFIZTs7SUFRakIsWUFBYyxDQUFBLENBQUE7TUFDWixJQUFDLENBQUEsR0FBRyxDQUFDLE9BQUwsQ0FBYSxDQUFBLENBQUEsR0FBQTtlQUFHLElBQUMsQ0FBQSxJQUFELENBQUE7TUFBSCxDQUFiO01BQ0EsSUFBQyxDQUFBLEdBQUcsQ0FBQyxRQUFMLENBQWMsQ0FBQSxDQUFBLEdBQUE7ZUFBRyxJQUFDLENBQUEsSUFBRCxDQUFBO01BQUgsQ0FBZDtNQUVBLElBQUMsQ0FBQSxHQUFHLENBQUMsVUFBTCxDQUFnQixDQUFBLENBQUEsR0FBQTtlQUFHLElBQUMsQ0FBQSxJQUFELENBQUE7TUFBSCxDQUFoQjtNQUNBLElBQUMsQ0FBQSxHQUFHLENBQUMsVUFBTCxDQUFnQixDQUFBLENBQUEsR0FBQTtRQUNkLElBQUEsQ0FBZSxJQUFDLENBQUEsR0FBRyxDQUFDLEVBQUwsQ0FBUSxRQUFSLENBQWY7aUJBQUEsSUFBQyxDQUFBLElBQUQsQ0FBQSxFQUFBOztNQURjLENBQWhCO2FBR0EsSUFBQyxDQUFBLEdBQUcsQ0FBQyxLQUFMLENBQVcsQ0FBQyxDQUFELENBQUEsR0FBQTtRQUNULElBQUcsQ0FBQyxDQUFDLE9BQUYsS0FBYSxFQUFoQjtVQUNFLElBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQyxFQUFWLENBQWEsVUFBYixDQUFIO21CQUNFLElBQUMsQ0FBQSxJQUFELENBQUEsRUFERjtXQUFBLE1BQUE7bUJBR0UsSUFBQyxDQUFBLElBQUQsQ0FBQSxFQUhGO1dBREY7O01BRFMsQ0FBWDtJQVJZOztJQWVkLGNBQWdCLENBQUEsQ0FBQTtNQUNkLElBQUMsQ0FBQSxLQUFLLENBQUMsVUFBUCxDQUFrQixDQUFBLENBQUEsR0FBQTtlQUFHLElBQUMsQ0FBQSxJQUFELENBQUE7TUFBSCxDQUFsQjthQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsVUFBUCxDQUFrQixDQUFBLENBQUEsR0FBQTtRQUNoQixJQUFBLENBQWUsSUFBQyxDQUFBLEdBQUcsQ0FBQyxFQUFMLENBQVEsUUFBUixDQUFmO2lCQUFBLElBQUMsQ0FBQSxJQUFELENBQUEsRUFBQTs7TUFEZ0IsQ0FBbEI7SUFGYzs7SUFLaEIsSUFBTSxDQUFBLENBQUE7YUFDSixJQUFDLENBQUEsUUFBUSxDQUFDLElBQVYsQ0FBQTtJQURJOztJQUdOLElBQU0sQ0FBQSxDQUFBO2FBQ0osSUFBQyxDQUFBLFFBQVEsQ0FBQyxJQUFWLENBQUE7SUFESTs7RUF0RFI7O0VBeURBLENBQUEsQ0FBRSxRQUFGLENBQVcsQ0FBQyxLQUFaLENBQWtCLFFBQUEsQ0FBQSxDQUFBO1dBQ2hCLENBQUEsQ0FBRSxvQkFBRixDQUF1QixDQUFDLElBQXhCLENBQTZCLFFBQUEsQ0FBQSxDQUFBO2FBQzNCLElBQUksVUFBSixDQUFlLElBQWY7SUFEMkIsQ0FBN0I7RUFEZ0IsQ0FBbEI7QUF6REEiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBBZGdUb29sdGlwXG4gIGNvbnN0cnVjdG9yOiAoZWwpIC0+XG4gICAgQCRlbCA9ICQoZWwpXG4gICAgQHZhbHVlID0gQCRlbC5hdHRyKCdkYXRhLWFkZy10b29sdGlwJylcbiAgXG4gICAgQGluaXRJY29uKClcbiAgICBAaW5pdEJhbGxvb24oKVxuICAgIEBpbml0RGVzY3JpcHRpb24oKVxuICAgIFxuICAgIEBpbml0RWxFdmVudHMoKVxuICAgIEBpbml0SWNvbkV2ZW50cygpXG4gIFxuICBpbml0SWNvbjogLT5cbiAgICBAJGljb24gPSAkKFwiPHNwYW4gYXJpYS1oaWRkZW49J3RydWUnPj88L3NwYW4+XCIpXG4gICAgQCRlbC5hZnRlcihAJGljb24pXG4gICAgXG4gIGluaXRCYWxsb29uOiAtPlxuICAgIEAkYmFsbG9vbiA9ICQoXCI8c3Bhbj4je0B2YWx1ZX08L3NwYW4+XCIpXG4gICAgQCRpY29uLmFwcGVuZChAJGJhbGxvb24pXG4gICAgXG4gICAgQCRiYWxsb29uLmNsaWNrID0+XG4gICAgICBAaGlkZSgpXG4gICAgXG4gIGluaXREZXNjcmlwdGlvbjogLT5cbiAgICB2YWx1ZUVsZW1lbnQgPSBcIjxzcGFuIGRhdGEtYWRnLXNyLW9ubHk+ICgje0B2YWx1ZX0pPC9zcGFuPlwiXG4gICAgXG4gICAgaWYgQCRlbC5pcygnaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnKVxuICAgICAgJChcImxhYmVsW2Zvcj0nI3tAJGVsLmF0dHIoJ2lkJyl9J11cIikuYXBwZW5kKHZhbHVlRWxlbWVudClcbiAgICBlbHNlXG4gICAgICBAJGVsLmFwcGVuZCh2YWx1ZUVsZW1lbnQpXG4gIFxuICBpbml0RWxFdmVudHM6IC0+XG4gICAgQCRlbC5mb2N1c2luID0+IEBzaG93KClcbiAgICBAJGVsLmZvY3Vzb3V0ID0+IEBoaWRlKClcbiAgICBcbiAgICBAJGVsLm1vdXNlZW50ZXIgPT4gQHNob3coKVxuICAgIEAkZWwubW91c2VsZWF2ZSA9PlxuICAgICAgQGhpZGUoKSB1bmxlc3MgQCRlbC5pcygnOmZvY3VzJylcbiAgICAgICAgXG4gICAgQCRlbC5rZXl1cCAoZSkgPT5cbiAgICAgIGlmIGUua2V5Q29kZSA9PSAyNyAjIEVzY1xuICAgICAgICBpZiBAJGJhbGxvb24uaXMoJzp2aXNpYmxlJylcbiAgICAgICAgICBAaGlkZSgpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBAc2hvdygpXG4gICAgXG4gIGluaXRJY29uRXZlbnRzOiAtPlxuICAgIEAkaWNvbi5tb3VzZWVudGVyID0+IEBzaG93KClcbiAgICBAJGljb24ubW91c2VsZWF2ZSA9PlxuICAgICAgQGhpZGUoKSB1bmxlc3MgQCRlbC5pcygnOmZvY3VzJylcbiAgICBcbiAgc2hvdzogLT5cbiAgICBAJGJhbGxvb24uc2hvdygpXG4gICAgXG4gIGhpZGU6IC0+XG4gICAgQCRiYWxsb29uLmhpZGUoKVxuICAgIFxuJChkb2N1bWVudCkucmVhZHkgLT5cbiAgJCgnW2RhdGEtYWRnLXRvb2x0aXBdJykuZWFjaCAtPlxuICAgIG5ldyBBZGdUb29sdGlwIEAiXX0=
// # sourceURL=coffeescript
